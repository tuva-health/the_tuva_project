version: 2

models:
#### Encounters
## Intermediate
  - name: encounters__int_office_visits_injections
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_claims_preprocessing
        {% else %}claims_preprocessing{%- endif -%}
      materialized: view
      tags:
      - claims_preprocessing
      - encounters

  - name: encounters__int_office_visits_ptotst
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_claims_preprocessing
        {% else %}claims_preprocessing{%- endif -%}
      materialized: view
      tags:
      - claims_preprocessing
      - encounters

  - name: encounters__int_office_visits_surgery
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_claims_preprocessing
        {% else %}claims_preprocessing{%- endif -%}
      materialized: view
      tags:
      - claims_preprocessing
      - encounters

  - name: encounters__int_office_visits
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_claims_preprocessing
        {% else %}claims_preprocessing{%- endif -%}
      materialized: view
      tags:
      - claims_preprocessing
      - encounters


## Staging
  - name: encounters__stg_medical_claim
    description: Staging med claims for encounter grouper
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_claims_preprocessing
        {% else %}claims_preprocessing{%- endif -%}
      materialized: table # change back
      tags:
        - claims_preprocessing
        - encounters

  - name: encounters__stg_inpatient_institutional
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_claims_preprocessing
        {% else %}claims_preprocessing{%- endif -%}
      materialized: table
      tags:
        - claims_preprocessing
        - encounters

  - name: encounters__stg_outpatient_institutional
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_claims_preprocessing
        {% else %}claims_preprocessing{%- endif -%}
      materialized: table
      tags:
        - claims_preprocessing
        - encounters

  - name: encounters__stg_professional
    config:
      schema: |
        {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_claims_preprocessing
        {% else %}claims_preprocessing{%- endif -%}
      materialized: table
      tags:
        - claims_preprocessing
        - encounters